"use strict";angular.module("patManApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]);var obtdPats=[{}],tabKey=0,app=angular.module("patManApp"),obtdSymps=[];app.directive("adminView",function(){return{restrict:"E",templateUrl:"/views/adminView.html"}}),app.controller("MainCtrl",["$http","$route",function(a,b){this.awesomeThings=[],a({url:"http://hana01.dev.dci.local:8000/SaintResearch/model/services/admin.xsodata/admin/?$format=json",method:"GET"}).then(function(a){obtdPats=a.data.d.results,0==tabKey&&(alert("success"+JSON.stringify(obtdPats,null," ")),tabKey=1,b.reload())},function(a){alert("Initialization of Table from HANA Database failed. Please Log In Try Again.")}),a({url:"http://hana01.dev.dci.local:8000/SaintResearch/model/services/admin.xsodata/symptoms/?$format=json",method:"GET"}).then(function(a){for(var b=0;b<a.data.d.results.length;b++)obtdSymps[b]=a.data.d.results[b].symptom;alert("success obtaining symptoms"+JSON.stringify(obtdSymps,null," "))},function(a){alert("Initialization of Table from HANA Database failed. Please Log In Try Again.")})}]);var patientList=[{id:123,fname:"Ramesh Srinivasan",phno:"8791010212",gender:"M",add:"House, Street, Town, State",age:34,enrollDate:1440058051543,email:"ramsri@abc.com",updateDate:1440058051543,docName:"NA",symptom:"Cold"},{id:456,fname:"Sandhya Kumar",phno:"9374586758",gender:"F",add:"House, Locality, District, State",age:29,email:"sankum@abc.com",enrollDate:1440058051543,updateDate:1440058051543,docName:"Dr. Tarun",symptom:"Swelling"},{id:789,fname:"Farooq M P",phno:"8594848594",gender:"M",add:"Plot, Street, City, State",age:22,email:"farmp@aabc.com",enrollDate:1440058051543,updateDate:1440058051543,docName:"Dr. Kiran",symptom:"Migraine"}],toSend={age:12,name:"Shrey"},symptomList=["Fever","Cold","Cough","Vomiting","Insomnia","Migraine","Swelling","Fracture","Laughing"],currPat={},currTab=1,isUpdate=0;app.controller("PatListCtrl",["$scope","$route","$http",function(a,b,c){a.alert=alert,this.isUpdat=isUpdate,a.patients=obtdPats,a.updatePat=function(a){currPat={},isUpdate=1,currPat=obtdPats[a],alert(JSON.stringify(currPat,null,"    ")),currTab=2,isUpdate=1,b.reload()},a.removePat=function(a){var d=obtdPats[a].id.toString();alert("Remove from HANA patient with PID: "+d),c({url:"http://10.17.206.142:8080/rest/patient/deletePatient/"+d,method:"GET"}).then(function(a){alert("success"+JSON.stringify(a,null," "))},function(a){alert("failed"+JSON.stringify(a,null," "))}),tabKey=0,obtdPats={},b.reload()}}]),app.controller("TabController",["$route",function(a){this.tab=currTab,this.patient=currPat,this.isSet=function(a){return this.tab===a},this.setTab=function(b){2==currTab&&1==b?(currPat={},currTab=1,isUpdate=0,a.reload()):this.tab=b}}]);var docList=[];app.controller("PatientController",["$scope","$route","$http",function(a,b,c){this.symptoms=obtdSymps,this.patient=currPat,a.patCtrl.obtdDocs=docList,a.patCtrl.obtdDocID=[];var d=0;a.updateDoc=function(){alert("docupdate"),a.patCtrl.patient.docName="Suggesting a doctor for you.",c({url:"http://hana01.dev.dci.local:8000/SaintResearch/model/services/admin.xsodata/doctors?$filter=symptom%20eq%20%27"+a.patCtrl.patient.symptom+"%27&$select=docName,ID_1&$format=json",method:"GET"}).then(function(b){for(var c=0;c<b.data.d.results.length;c++)a.patCtrl.obtdDocs[c]=b.data.d.results[c].docName,a.patCtrl.obtdDocID[c]=b.data.d.results[c].ID_1;d=Math.floor(Math.random()*b.data.d.results.length),a.patCtrl.patient.docName=a.patCtrl.obtdDocs[d],a.patCtrl.patient.docID=a.patCtrl.obtdDocID[d],alert("success obtaining symptoms"+JSON.stringify(a.patCtrl.patient.docName,null," ")),alert("Doctor IDS"+JSON.stringify(a.patCtrl.obtdDocID,null," "))},function(a){alert("Initialization of Table from HANA Database failed. Please Log In Try Again.")}),docList=a.patCtrl.patient.docName,currTab=2},this.key=isUpdate,this.patient.updateDate=Date.now(),this.patient.modifiedBy="John Doe",this.addReview=function(){(null==this.patient.docName||""==this.patient.docName)&&(this.patient.docName="NA"),0==this.key&&(this.patient.ID=obtdPats.length,alert(JSON.stringify(this.patient,null,"   ")),alert(JSON.stringify(toSend,null," ")),c({url:"http://10.17.206.142:8080/rest/patient/registerPatient/",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:this.patient}).then(function(a){alert("success"+JSON.stringify(a,null," "))},function(a){alert("failed"+JSON.stringify(a,null," "))})),this.patient={},currPat={},currTab=1,isUpdate=0,b.reload()}}]),angular.module("patManApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("patManApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/adminView.html",'<div class="container"> <section ng-controller="TabController as tab"> <ul class="nav nav-pills"> <li ng-class="{ active:tab.isSet(1) }"> <a href ng-click="tab.setTab(1)">View</a> </li> <li ng-class="{ active:tab.isSet(2) }"> <a href ng-click="tab.setTab(2)">Add/Update</a> </li> </ul> <div class="jumbotron"> <div ng-show="tab.isSet(1)"> <h4>View</h4> <div class="container-fluid" ng-controller="PatListCtrl"> <div class="row"> <!--Sidebar content--> <input class="form-control" ng-model="query" placeholder="Type Search Query Here..."> <br> <!--Body content--> <center> <table class="table-striped" style="text-align: left" class="patients"> <tr> <th>&nbsp;Name&nbsp;</th> <th>&nbsp;Age&nbsp;</th> <th>&nbsp;Gen&nbsp;</th> <th>&nbsp;Mod&nbsp;</th> <th>&nbsp;Cre&nbsp;</th> <th>&nbsp;Symptoms&nbsp;</th> <th>&nbsp;Doctor&nbsp;</th> <th>&nbsp;Update&nbsp;</th> <th>&nbsp; Delete &nbsp;</th> </tr> <tr ng-repeat="patient in patients | filter:query"> <td>&nbsp; {{patient.fname}} &nbsp;</td> <td>&nbsp; {{patient.age}} &nbsp;</td> <td>&nbsp; {{patient.gender}} &nbsp;</td> <td>&nbsp; {{patient.updateDate | date}} &nbsp;</td> <td>&nbsp; {{patient.enrollDate | date}} &nbsp;</td> <td>&nbsp; {{patient.symptom}} &nbsp;</td> <td>&nbsp; {{patient.docName}} &nbsp;</td> <td><center><div style="padding: 5px"><button class="btn-xs btn-warning" ng-click="updatePat($index);" aria-label="Update">U</button></div></center></td> <td><center><div style="padding: 5px"><button class="btn-xs btn-danger" ng-click="removePat($index)" aria-label="Remove">X</button></div></center></td> </tr> </table> </center>   </div> </div> </div> <!--  Spec Tab\'s Content  --> <div ng-show="tab.isSet(2)"> <form name="patientForm" ng-controller="PatientController as patCtrl" ng-submit="patCtrl.addReview()"> <h4>Live Preview</h4> <div class="jumbotron" style="text-align:left"> <blockquote> <strong>Name:{{patCtrl.patient.fname}}</strong> <br>Gender: {{patCtrl.patient.gender}} <br>Phno: {{patCtrl.patient.phno}} <br>Age: {{patCtrl.patient.age}} <cite class="clearfix">Email: {{patCtrl.patient.email}}</cite> Address: {{patCtrl.patient.add}} </blockquote> </div> <h4>{{patCtrl.key?"Update":"Add"}} A Patient</h4> <fieldset class="form-group"> <input type="text" ng-model="patCtrl.patient.fname" ng-hide="patCtrl.key" class="form-control" placeholder="Enter Patient Name Here..." title="FullName" required> <div class="form-control" style="text-align: left; color: green" ng-show="patCtrl.key">{{patCtrl.patient.fname}}</div> </fieldset> <fieldset class="form-group"> <input type="text" ng-model="patCtrl.patient.phno" class="form-control" placeholder="Phone Number..." title="Phone" required> </fieldset> <fieldset class="form-group"> <input type="number" ng-model="patCtrl.patient.age" class="form-control" placeholder="Age..." title="Age"> </fieldset> <fieldset class="form-group"> <textarea ng-model="patCtrl.patient.add" class="form-control" placeholder="Enter Patient Address..." title="Address"></textarea> </fieldset> <fieldset class="form-group"> <select ng-model="patCtrl.patient.gender" class="form-control" ng-options="gender for gender in [\'M\', \'F\']" title="Gender" required> <option value>Patient Gender</option> </select> </fieldset> <fieldset class="form-group"> <input ng-model="patCtrl.patient.email" type="email" class="form-control" placeholder="jimmyDean@example.org" title="Email"> </fieldset> <!--fieldset class="form-group">\r\n						<select multiple ng-model="patCtrl.patient.symptoms" class="form-control" ng-options="symptoms for symptoms in patCtrl.symptoms" title="Symptoms">\r\n                            <option value>--Patient Symptoms--</option>\r\n							\r\n                        </select>\r\n					</fieldset--> <fieldset class="form-group"> <!--select ng-model="patCtrl.patient.symptom" class="form-control" ng-options="symptoms for symptoms in patCtrl.symptoms" title="Symptoms">\r\n                            <option value>--Patient Symptom--</option>\r\n							<option value><input ng-model="query" placeholder="Type Search Query Here..."></option>\r\n                        </select--> <select chosen class="form-control" ng-model="patCtrl.patient.symptom" data-placeholder="Choose a Symptom..." ng-change="updateDoc()" ng-options="symptoms for symptoms in patCtrl.symptoms" title="Symptoms" tabindex="2"> </select> </fieldset> <fieldset class="form-group"> <select class="form-control" ng-model="patCtrl.patient.docName" data-placeholder="Choose a Doctor..." ng-show="patCtrl.patient.docName.length" ng-options="doctors for doctors in patCtrl.obtdDocs" title="DocName" tabindex="2"> </select> </fieldset> <!--div class="ui fluid multiple search selection dropdown">\r\n						  <input type="hidden" name="country">\r\n						  <i class="dropdown icon"></i>\r\n						  <div class="default text">Select Country</div>\r\n						  <div class="menu">\r\n						  <div class="item" data-value="af"><i class="af flag"></i>Afghanistan</div>\r\n						  <div class="item" data-value="ax"><i class="ax flag"></i>Aland Islands</div>\r\n						  </div>\r\n					</div--> <fieldset class="form-group"> <input type="submit" class="btn btn-primary pull-right" value="Submit Patient"> </fieldset> </form> </div> </div> </section> </div>'),a.put("views/main.html","<admin-view></admin-view>")}]);